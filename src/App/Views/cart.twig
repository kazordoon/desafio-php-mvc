{% extends "layouts/base.twig" %}

{% block content %}
<div class="container center">
  <h1>{{ title }}</h1>
  <small>Os preços estarão com problema nesta página, porém na página de checkout estará correto, corrigirei isto em breve.</small>

  <table>
    <thead>
      <th>Imagem</th>
      <th>Nome</th>
      <th>Preço</th>
      <th>Quantidade</th>
      <th>Total</th>
    </thead>
    <tbody>
      {% for product in products %}
      <tr class="product" data-id="{{ product.id }}">
        <td><img src="{{ product.image_url }}" alt="{{ product.name }}" /></td>
        <td>{{ product.name }}</td>
        <td>{{ product.price }}</td>
        <td class="product-quantity">
          <button class="decrease">-</button>
          <input class="quantity-input" type="number" value="{{ product.quantity }}" min="1" max="{{ product.stock }}" readonly />
          <button class="increase">+</button>
        </td>
        <td class="product-total">{{ product.price * product.quantity }}</td>
        <th><button class="btn btn-danger delete">Excluir</button></th>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <p>Valor total: <strong><span id="total-price">{{ total_price }}</span></strong></p>
  <button id="go-to-checkout" class="btn">Ir para o checkout</button>
</div>

<script type="module" src="{{ constant('BASE_URL') }}assets/js/cart/index.js"></script>

{% endblock %}
